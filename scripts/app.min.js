!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.App=t()}}(function(){return function t(e,i,s){function o(a,r){if(!i[a]){if(!e[a]){var c="function"==typeof require&&require;if(!r&&c)return c(a,!0);if(n)return n(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){var i=e[a][1][t];return o(i?i:t)},u,u.exports,t,e,i,s)}return i[a].exports}for(var n="function"==typeof require&&require,a=0;a<s.length;a++)o(s[a]);return o}({"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\app.ts":[function(t,e,i){"use strict";var s=t("jquery");t("jquery-migrate"),t("foundation-sites");var o=t("./gmaps.ts"),n=function(){function t(t,e){this.latLng=new google.maps.LatLng(t,e)}return t.prototype.toString=function(){return this.latLng.lat()+", "+this.latLng.lng()},t.prototype.getLatLng=function(){return this.latLng},t}();i.Location=n;var a=function(){function t(){}return t.getHiveRadius=function(t){return(t-1)*Math.sqrt(3)*this.scanRadius+this.scanRadius},t.getStepsToCoverRadius=function(t){return Math.ceil((t-this.scanRadius)/this.scanRadius/Math.sqrt(3)+1)},t.getBeehiveRadius=function(e,i){return Math.floor(3*(e-1)/2-.5)*(t.getHiveRadius(i)-t.hiveOverlap)+t.getHiveRadius(i)},t.getLeapsToCoverRadius=function(e,i){return Math.ceil(2*((e-t.getHiveRadius(i))/(t.getHiveRadius(i)-t.hiveOverlap)+.5)/3+1)},t.distanceBetweenHiveCenters=function(e){var i=(e-1)*(3*this.scanRadius/2)+t.locationAdjustment;return 2*i-t.hiveOverlap},t.scanRadius=70,t.locationAdjustment=Math.sqrt(3)*t.scanRadius/2,t.hiveOverlap=t.scanRadius/2-2*(t.scanRadius-t.locationAdjustment),t}();i.Util=a;var r=function(){function t(){new o.GMaps;s(document).foundation()}return t}();i.App=r},{"./gmaps.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\gmaps.ts","foundation-sites":"foundation-sites",jquery:"jquery","jquery-migrate":"jquery-migrate"}],"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\beehive.ts":[function(t,e,i){"use strict";var s=t("../config.ts"),o=t("./app.ts"),n=t("./hive.ts"),a=t("knockout"),r=t("lodash"),c=function(){function t(t){var e=this;this.options=t,this.hives=a.observableArray([]),this.isEditingHives=!1,this.coveringRadius=o.Util.getBeehiveRadius(s.default.leaps,s.default.steps),this.activeHives=a.computed(function(){return e.getActiveHives()},this,{deferEvaluation:!0}),this.mapObject=new google.maps.Circle({radius:this.coveringRadius,fillColor:"#0000FF",fillOpacity:0,strokeWeight:1,clickable:!0,center:this.options.center.getLatLng(),editable:!0,draggable:!0,zIndex:3}),this.options.map.addMapObject(this.mapObject),this.generateHives(),this.toggleActive(),this.options.map.addListener(this.mapObject,"click",function(){return e.toggleActive()}),this.options.map.addListener(this.mapObject,"radius_changed",function(){e.coveringRadius=e.mapObject.getRadius();var t=o.Util.getLeapsToCoverRadius(e.coveringRadius,e.options.steps);e.options.leaps!==t&&(e.options.leaps=t,e.generateHives())}),this.options.map.addListener(this.mapObject,"center_changed",function(){var t=e.mapObject.getCenter();e.options.center=new o.Location(t.lat(),t.lng()),e.generateHives()})}return t.prototype.getHives=function(){return console.log("getting hives for "+this.options.center.toString()),this.hives()},t.prototype.reset=function(t){void 0===t&&(t=!1);for(var e=0;e<this.hives().length;e++)this.hives()[e].reset();this.hives([]),t&&(this.mapObject=this.options.map.removeMapObject(this.mapObject))},t.prototype.generateHives=function(){var t=this;this.reset();var e=[],i=o.Util.distanceBetweenHiveCenters(this.options.steps),s=function(s,a,r,c){void 0===r&&(r=i),void 0===c&&(c=!0);var p=google.maps.geometry.spherical.computeOffset(s,r,a);return c&&(p=google.maps.geometry.spherical.computeOffset(p,o.Util.locationAdjustment,a+90)),e.push(new n.Hive({center:new o.Location(p.lat(),p.lng()),steps:t.options.steps,map:t.options.map})),p},a=this.options.center.getLatLng();a=s(a,0,0,!1),this.lastHiveCenter=a;for(var r=2;r<=this.options.leaps;r++){a=s(this.lastHiveCenter,0,i),this.lastHiveCenter=a;for(var c=1;c<r;c++)a=s(a,120);for(var p=1;p<r;p++)a=s(a,180);for(var u=1;u<r;u++)a=s(a,240);for(var l=1;l<r;l++)a=s(a,300);for(var h=1;h<r;h++)a=s(a,0);for(var v=2;v<r;v++)a=s(a,60)}return this.hives(e),this.hives()},t.prototype.resize=function(t){this.options.steps=t,this.options.leaps=o.Util.getLeapsToCoverRadius(this.coveringRadius,this.options.steps),this.generateHives()},t.prototype.disableActive=function(){this.isActive=!1,this.mapObject.set("fillOpacity",0)},t.prototype.toggleActive=function(t){void 0===t&&(t=!1),this.isActive=!this.isActive,this.mapObject.set("fillOpacity",this.isActive?.3:0),this.options.map.setActiveBeehive(this.isActive?this:null)},t.prototype.editHives=function(){this.isEditingHives=!this.isEditingHives;for(var t=0;t<this.hives().length;t++)this.isEditingHives?this.hives()[t].addListener():this.hives()[t].removeListener();this.mapObject.set("zIndex",this.isEditingHives?1:3),this.mapObject.set("fillOpacity",this.isEditingHives?0:.3)},t.prototype.getActiveHives=function(){return r.filter(this.hives(),function(t){return t.isActive()})},t}();i.Beehive=c},{"../config.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\config.ts","./app.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\app.ts","./hive.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\hive.ts",knockout:"knockout",lodash:"lodash"}],"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\gmaps.ts":[function(t,e,i){"use strict";var s=t("../config.ts"),o=t("load-google-maps-api"),n=t("./app.ts"),a=t("./map.ts"),r=function(){function t(){var t=this;this.map=new a.Map,o.default({key:s.default.googleMapsKey,libraries:["places","geometry"]}).then(function(e){t.initMap()})}return t.prototype.getMap=function(){return this.map},t.prototype.initMap=function(){var t=this;this.gmap=new google.maps.Map(document.getElementById("map"),{zoom:s.default.zoom,center:new google.maps.LatLng(s.default.latitude,s.default.longitude),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1});var e=document.getElementById("pac-input");this.gmap.controls[google.maps.ControlPosition.TOP_CENTER].push(document.getElementById("custom-map-controls")),this.gmap.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(document.getElementById("generate-trigger")),this.gmap.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(document.getElementById("github-buttons"));var i=new google.maps.places.Autocomplete(e);i.bindTo("bounds",this.gmap),i.addListener("place_changed",function(){var e=i.getPlace();e.geometry&&(t.gmap.setCenter(e.geometry.location),t.gmap.setZoom(s.default.zoom))}),this.gmap.addListener("click",function(e){t.map.addBeehive(new n.Location(e.latLng.lat(),e.latLng.lng()))}),google.maps.event.addListenerOnce(this.gmap,"idle",function(){t.map.initMap({gmap:t.gmap})})},t}();i.GMaps=r},{"../config.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\config.ts","./app.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\app.ts","./map.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\map.ts","load-google-maps-api":"load-google-maps-api"}],"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\hive.ts":[function(t,e,i){"use strict";var s=t("./app.ts"),o=t("knockout"),n=function(){function t(t){this.options=t,this.isActive=o.observable(!1);var e=this.options.center.getLatLng(),i=s.Util.getHiveRadius(this.options.steps),n=google.maps.geometry.spherical.computeOffset,a=[n(e,i,30),n(e,i,90),n(e,i,150),n(e,i,210),n(e,i,270),n(e,i,330)],r=new google.maps.Polygon({paths:a,fillOpacity:.3,strokeWeight:1,zIndex:2});this.mapObject=r,this.toggleActive(),this.options.map.addMapObject(r)}return Object.defineProperty(t.prototype,"steps",{get:function(){return this.options.steps},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.mapObject=this.options.map.removeMapObject(this.mapObject)},t.prototype.toggleActive=function(){this.isActive(!this.isActive()),this.mapObject.set("fillColor",this.isActive()?"#0F0":"#F00")},t.prototype.addListener=function(){var t=this;this.activeListener=google.maps.event.addListener(this.mapObject,"click",function(){return t.toggleActive()})},t.prototype.removeListener=function(){this.activeListener.remove()},t.prototype.getCenter=function(){return this.options.center},t}();i.Hive=n},{"./app.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\app.ts",knockout:"knockout"}],"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\map.ts":[function(t,e,i){"use strict";var s=t("../config.ts"),o=t("./beehive.ts"),n=t("jquery"),a=t("./ViewModel.ts"),r=t("knockout"),c=t("lodash"),p=function(){function t(){var t=this;this.beehives=r.observableArray([]),this.activeBeehive=null,this.steps=s.default.steps,this.activeHives=r.computed(function(){return t.getActiveHives()})}return t.prototype.initMap=function(t){var e=this;this.options=t;var i=n("#beehive-control .slider").data("zfPlugin").options;i.end=s.default.maxSteps,i.initialStart=s.default.steps,n("#custom-map-controls").show(),Foundation.reInit(["slider"]),n("#beehive-control .slider").on("moved.zf.slider",function(t){return e.changeSteps(t)}),n("#remove").on("click",function(){return e.removeActiveHive()}),n("#edit-hives").on("click",function(){return e.editHives()});var o=new a.ViewModel({map:this});r.applyBindings(o,document.getElementsByTagName("body")[0])},t.prototype.addBeehive=function(t){var e=new o.Beehive({map:this,steps:s.default.steps,leaps:s.default.leaps,center:t});this.beehives.push(e),n("#generate-trigger").show()},t.prototype.addMapObject=function(t){t.set("map",this.options.gmap)},t.prototype.removeMapObject=function(t){return t.set("map",null),t=null},t.prototype.addListener=function(t,e,i){google.maps.event.addListener(t,e,i)},t.prototype.changeSteps=function(t){this.steps=Number(n("#steps").val()),null!==this.activeBeehive&&this.activeBeehive.resize(this.steps)},t.prototype.removeActiveHive=function(){null!==this.activeBeehive&&(this.activeBeehive.reset(!0),this.beehives.splice(this.beehives.indexOf(this.activeBeehive),1),this.activeBeehive=null,n("#remove").hide(),0===this.beehives().length&&n("#generate-trigger").hide())},t.prototype.setActiveBeehive=function(t){null!==this.activeBeehive&&this.activeBeehive.disableActive(),null!==t?(n("#remove").show(),n("#edit-hives").show()):(n("#remove").hide(),n("#edit-hives").hide()),this.activeBeehive=t},t.prototype.editHives=function(){this.activeBeehive.editHives()},t.prototype.getActiveHives=function(){return c.flatten(c.map(this.beehives(),function(t){return t.activeHives()}))},t}();i.Map=p},{"../config.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\config.ts","./ViewModel.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\viewModel.ts","./beehive.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\beehive.ts",jquery:"jquery",knockout:"knockout",lodash:"lodash"}],"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\viewModel.ts":[function(t,e,i){"use strict";var s=t("knockout"),o=function(){function t(t){var e=this;this.options=t,this.activeHives=s.computed(function(){return e.getActiveHives()})}return t.prototype.getActiveHives=function(){return this.options.map.activeHives()},t}();i.ViewModel=o},{knockout:"knockout"}],"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\config.ts":[function(t,e,i){"use strict";var s=function(){function t(){}return t.googleMapsKey="AIzaSyD8WtOa0Mw_lpppdbXQrORnabd9LK3bri8",t.latitude=38.624691,t.longitude=-90.184776,t.zoom=12,t.leaps=4,t.steps=5,t.maxSteps=15,t}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=s},{}]},{},["D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\app.ts"])("D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\app.ts")});
//# sourceMappingURL=app.min.js.map

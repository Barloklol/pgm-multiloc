!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.App=e()}}(function(){return function e(t,i,s){function o(a,r){if(!i[a]){if(!t[a]){var c="function"==typeof require&&require;if(!r&&c)return c(a,!0);if(n)return n(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var u=i[a]={exports:{}};t[a][0].call(u.exports,function(e){var i=t[a][1][e];return o(i?i:e)},u,u.exports,e,t,i,s)}return i[a].exports}for(var n="function"==typeof require&&require,a=0;a<s.length;a++)o(s[a]);return o}({"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\app.ts":[function(e,t,i){"use strict";var s=e("jquery");e("jquery-migrate"),e("foundation-sites");var o=e("./gmaps.ts"),n=function(){function e(e,t){this.latLng=new google.maps.LatLng(e,t)}return e.prototype.toString=function(){return this.latLng.lat()+", "+this.latLng.lng()},e.prototype.getLatLng=function(){return this.latLng},e}();i.Location=n;var a=function(){function e(){}return e.getHiveRadius=function(e){return(e-1)*Math.sqrt(3)*this.scanRadius+this.scanRadius},e.getStepsToCoverRadius=function(e){return Math.ceil((e-this.scanRadius)/this.scanRadius/Math.sqrt(3)+1)},e.getBeehiveRadius=function(t,i){return Math.floor(3*t/2-.5)*e.getHiveRadius(i)},e.getLeapsToCoverRadius=function(t,i){return Math.ceil(2*(t/e.getHiveRadius(i)+.5)/3)},e.distanceBetweenHiveCenters=function(t){var i=(t-1)*(3*this.scanRadius/2)+e.locationAdjustment,s=this.scanRadius/2-2*(this.scanRadius-e.locationAdjustment);return 2*i-s},e.scanRadius=70,e.locationAdjustment=Math.sqrt(3)*e.scanRadius/2,e}();i.Util=a;var r=function(){function e(){new o.GMaps;s(document).foundation()}return e}();i.App=r},{"./gmaps.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\gmaps.ts","foundation-sites":"foundation-sites",jquery:"jquery","jquery-migrate":"jquery-migrate"}],"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\beehive.ts":[function(e,t,i){"use strict";var s=e("../config.ts"),o=e("./app.ts"),n=e("./hive.ts"),a=function(){function e(e){var t=this;this.options=e,this.hives=[],this.isEditingHives=!1,this.coveringRadius=o.Util.getBeehiveRadius(s.default.leaps,s.default.steps),this.mapObject=new google.maps.Circle({radius:this.coveringRadius,fillColor:"#0000FF",fillOpacity:0,strokeWeight:1,clickable:!0,center:this.options.center.getLatLng(),editable:!0,draggable:!0,zIndex:3}),this.options.map.addMapObject(this.mapObject),this.generateHives(),this.toggleActive(),this.options.map.addListener(this.mapObject,"click",function(){return t.toggleActive()}),this.options.map.addListener(this.mapObject,"radius_changed",function(){t.coveringRadius=t.mapObject.getRadius();var e=o.Util.getLeapsToCoverRadius(t.coveringRadius,t.options.steps);t.options.leaps!==e&&(t.options.leaps=e,t.generateHives())}),this.options.map.addListener(this.mapObject,"center_changed",function(){var e=t.mapObject.getCenter();t.options.center=new o.Location(e.lat(),e.lng()),t.generateHives()})}return e.prototype.getHives=function(){return this.hives},e.prototype.reset=function(e){void 0===e&&(e=!1);for(var t=0;t<this.hives.length;t++)this.hives[t].reset();this.hives=[],e&&(this.mapObject=this.options.map.removeMapObject(this.mapObject))},e.prototype.generateHives=function(){var e=this;this.reset();var t=[],i=o.Util.distanceBetweenHiveCenters(this.options.steps),s=function(s,a,r,c){void 0===r&&(r=i),void 0===c&&(c=!0);var p=google.maps.geometry.spherical.computeOffset(s,r,a);return c&&(p=google.maps.geometry.spherical.computeOffset(p,o.Util.locationAdjustment,a+90)),t.push(new n.Hive({center:new o.Location(p.lat(),p.lng()),steps:e.options.steps,map:e.options.map})),p},a=this.options.center.getLatLng();a=s(a,0,0,!1),this.lastHiveCenter=a;for(var r=2;r<=this.options.leaps;r++){a=s(this.lastHiveCenter,0,i),this.lastHiveCenter=a;for(var c=1;c<r;c++)a=s(a,120);for(var p=1;p<r;p++)a=s(a,180);for(var u=1;u<r;u++)a=s(a,240);for(var l=1;l<r;l++)a=s(a,300);for(var h=1;h<r;h++)a=s(a,0);for(var d=2;d<r;d++)a=s(a,60)}return this.hives=t,this.hives},e.prototype.resize=function(e){this.options.steps=e,this.options.leaps=o.Util.getLeapsToCoverRadius(this.coveringRadius,this.options.steps),this.generateHives()},e.prototype.disableActive=function(){this.isActive=!1,this.mapObject.set("fillOpacity",0)},e.prototype.toggleActive=function(e){void 0===e&&(e=!1),this.isActive=!this.isActive,this.mapObject.set("fillOpacity",this.isActive?.3:0),this.options.map.setActiveBeehive(this.isActive?this:null)},e.prototype.editHives=function(){this.isEditingHives=!this.isEditingHives;for(var e=0;e<this.hives.length;e++)this.isEditingHives?this.hives[e].addListener():this.hives[e].removeListener();this.mapObject.set("zIndex",this.isEditingHives?1:3),this.mapObject.set("fillOpacity",this.isEditingHives?0:.3)},e}();i.Beehive=a},{"../config.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\config.ts","./app.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\app.ts","./hive.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\hive.ts"}],"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\gmaps.ts":[function(e,t,i){"use strict";var s=e("../config.ts"),o=e("load-google-maps-api"),n=e("./app.ts"),a=e("./map.ts"),r=function(){function e(){var e=this;o.default({key:s.default.googleMapsKey,libraries:["places","geometry"]}).then(function(t){e.initMap(),e.map=new a.Map({gmap:e.gmap})})}return e.prototype.initMap=function(){var e=this;this.gmap=new google.maps.Map(document.getElementById("map"),{zoom:s.default.zoom,center:new google.maps.LatLng(s.default.latitude,s.default.longitude),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1});var t=document.getElementById("pac-input");this.gmap.controls[google.maps.ControlPosition.TOP_CENTER].push(document.getElementById("custom-map-controls")),this.gmap.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(document.getElementById("generate-trigger")),this.gmap.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(document.getElementById("github-buttons"));var i=new google.maps.places.Autocomplete(t);i.bindTo("bounds",this.gmap),i.addListener("place_changed",function(){var t=i.getPlace();t.geometry&&(e.gmap.setCenter(t.geometry.location),e.gmap.setZoom(s.default.zoom))}),this.gmap.addListener("click",function(t){e.map.addBeehive(new n.Location(t.latLng.lat(),t.latLng.lng()))}),google.maps.event.addListenerOnce(this.gmap,"idle",function(){e.map.handleCustomControls()})},e}();i.GMaps=r},{"../config.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\config.ts","./app.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\app.ts","./map.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\map.ts","load-google-maps-api":"load-google-maps-api"}],"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\hive.ts":[function(e,t,i){"use strict";var s=e("./app.ts"),o=function(){function e(e){this.options=e;var t=this.options.center.getLatLng(),i=s.Util.getHiveRadius(this.options.steps),o=google.maps.geometry.spherical.computeOffset,n=[o(t,i,30),o(t,i,90),o(t,i,150),o(t,i,210),o(t,i,270),o(t,i,330)],a=new google.maps.Polygon({paths:n,fillOpacity:.3,strokeWeight:1,zIndex:2});this.mapObject=a,this.toggleActive(),this.options.map.addMapObject(a)}return e.prototype.reset=function(){this.mapObject=this.options.map.removeMapObject(this.mapObject)},e.prototype.toggleActive=function(){this.isActive=!this.isActive,this.mapObject.set("fillColor",this.isActive?"#0F0":"#F00")},e.prototype.addListener=function(){var e=this;this.activeListener=google.maps.event.addListener(this.mapObject,"click",function(){return e.toggleActive()})},e.prototype.removeListener=function(){this.activeListener.remove()},e.prototype.getCenter=function(){return this.options.center},e}();i.Hive=o},{"./app.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\app.ts"}],"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\map.ts":[function(e,t,i){"use strict";var s=e("../config.ts"),o=e("./beehive.ts"),n=e("jquery"),a=function(){function e(e){this.options=e,this.beehives=[],this.activeBeehive=null,this.steps=s.default.steps}return e.prototype.handleCustomControls=function(){var e=this,t=n("#beehive-control .slider").data("zfPlugin").options;t.end=s.default.maxSteps,t.initialStart=s.default.steps,n("#custom-map-controls").show(),Foundation.reInit(["slider"]),n("#beehive-control .slider").on("moved.zf.slider",function(t){return e.changeSteps(t)}),n("#remove").on("click",function(){return e.removeActiveHive()}),n("#edit-hives").on("click",function(){return e.editHives()}),n("#generate-trigger").on("click",function(){return e.generateCoordsContent()})},e.prototype.addBeehive=function(e){var t=new o.Beehive({map:this,steps:s.default.steps,leaps:s.default.leaps,center:e});this.beehives.push(t),n("#generate-trigger").show()},e.prototype.addMapObject=function(e){e.set("map",this.options.gmap)},e.prototype.removeMapObject=function(e){return e.set("map",null),e=null},e.prototype.addListener=function(e,t,i){google.maps.event.addListener(e,t,i)},e.prototype.changeSteps=function(e){this.steps=Number(n("#steps").val()),null!==this.activeBeehive&&this.activeBeehive.resize(this.steps)},e.prototype.removeActiveHive=function(){null!==this.activeBeehive&&(this.activeBeehive.reset(!0),this.beehives.splice(this.beehives.indexOf(this.activeBeehive),1),this.activeBeehive=null,n("#remove").hide(),0===this.beehives.length&&n("#generate-trigger").hide())},e.prototype.setActiveBeehive=function(e){null!==this.activeBeehive&&this.activeBeehive.disableActive(),null!==e?(n("#remove").show(),n("#edit-hives").show()):(n("#remove").hide(),n("#edit-hives").hide()),this.activeBeehive=e},e.prototype.editHives=function(){this.activeBeehive.editHives()},e.prototype.generateCoordsContent=function(){console.log("coords");for(var e="",t=0;t<this.beehives.length;t++)for(var i=this.beehives[t].getHives(),s=0;s<i.length;s++){var o=i[s];if(o.isActive){var a=o.getCenter().toString();e+="<br />"+a}}console.log(e),n("#coords-list").empty().append(n("<pre>").html(e))},e}();i.Map=a},{"../config.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\config.ts","./beehive.ts":"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\beehive.ts",jquery:"jquery"}],"D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\config.ts":[function(e,t,i){"use strict";var s=function(){function e(){}return e.googleMapsKey="AIzaSyD8WtOa0Mw_lpppdbXQrORnabd9LK3bri8",e.latitude=38.624691,e.longitude=-90.184776,e.zoom=12,e.leaps=4,e.steps=5,e.maxSteps=15,e}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=s},{}]},{},["D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\app.ts"])("D:\\Code\\beccasafan\\PGM-MultiLoc\\src\\scripts\\app\\app.ts")});
//# sourceMappingURL=app.min.js.map
